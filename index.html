<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notification Demo</title>

<style>
:root{
  --bg:#f4f6f8;--card:#fff;--text:#000;--panel:#eef2ff;
}
body.dark{
  --bg:#0f172a;--card:#1e293b;--text:#e5e7eb;--panel:#020617;
}
body{
  margin:0;padding:20px;font-family:Arial,sans-serif;
  background:var(--bg);color:var(--text);
}
.main{
  max-width:520px;margin:auto;background:var(--card);
  padding:20px;border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}
button,input{
  width:100%;padding:10px;margin-top:10px;
  border-radius:6px;font-size:15px;
}
button{border:none;cursor:pointer}
.primary{background:#4f46e5;color:#fff}
.normal{background:#10b981;color:#fff}
.danger{background:#ef4444;color:#fff}
.stop{background:#6b7280;color:#fff}
.panelBtn{background:#0ea5e9;color:#fff}

.notice{
  margin-bottom:10px;padding:8px;border-radius:6px;
  background:#fde68a;color:#92400e;font-size:13px;
  text-align:center;display:none;
}

.progress{width:100%;height:14px;background:#374151;border-radius:7px;overflow:hidden;margin-top:10px}
.bar{height:100%;width:0%;background:#ef4444}

.footer{margin-top:20px;text-align:center;font-size:13px;opacity:.7}

/* SIDE PANEL */
.side{
  position:fixed;top:0;right:-360px;width:360px;height:100%;
  background:var(--card);padding:20px;
  box-shadow:-10px 0 25px rgba(0,0,0,.25);
  transition:right .3s ease;z-index:1000;overflow-y:auto;
}
.side.open{right:0}

.section{margin-top:20px}
.section h3{margin:0 0 10px 0}

.log,.history{
  padding:10px;background:var(--panel);
  border-radius:6px;font-size:13px;
  max-height:160px;overflow-y:auto;
}

/* MODAL */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);
display:none;align-items:center;justify-content:center;z-index:2000}
.modalBox{background:var(--card);padding:20px;border-radius:10px;max-width:420px}

/* WINDOWS PREVIEW */
#toastArea{
  position:fixed;right:16px;bottom:16px;z-index:3000;
  display:flex;flex-direction:column;gap:10px;pointer-events:none;
}
.toast{
  width:320px;background:#111827;color:#e5e7eb;border-radius:10px;
  padding:12px;box-shadow:0 10px 25px rgba(0,0,0,.35);
}
</style>
</head>

<body>

<div class="main">
<h2>üîî Notification Experiment</h2>

<div class="notice" id="windowsNotice">
Only supported for Chromebook at this point.<br>
Windows shows a visual preview instead.
</div>

<button class="primary" onclick="requestPermission()">Allow Notifications</button>
<button class="normal" onclick="sendOne()">Send Notification</button>
<button class="danger" onclick="startDemo()">‚ö†Ô∏è Fake ‚ÄúHacked‚Äù Demo</button>
<button class="stop" onclick="stopAll()">üõë Stop</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<button class="panelBtn" onclick="togglePanel()">‚öôÔ∏è Open Controls & Info</button>

<div class="footer">¬© Copyright FilipoPencil 2026</div>
</div>

<!-- SIDE PANEL -->
<div class="side" id="panel">

<button class="panelBtn" onclick="togglePanel()">‚ùå Close</button>
<button class="panelBtn" onclick="toggleDark()">üåô Toggle Dark Mode</button>

<div class="section">
<h3>‚úèÔ∏è Notification Content</h3>
<input id="titleInput" placeholder="Title">
<input id="textInput" placeholder="Message">
<input id="iconInput" placeholder="Icon URL (optional)">
<button onclick="setPreset('Homework reminder')">üìò Homework</button>
<button onclick="setPreset('Security alert')">üîê Security</button>
</div>

<div class="section">
<h3>‚è±Ô∏è Demo Controls</h3>
Speed: <span id="speedLabel">200</span> ms
<input type="range" min="100" max="2000" step="100" value="200" id="speedSlider">
Count: <span id="countLabel">30</span>
<input type="range" min="5" max="100" value="30" id="countSlider">
</div>

<div class="section">
<h3>üïò Fake Notification History</h3>
<div class="history" id="history">No notifications yet.</div>
</div>

<div class="section">
<button class="panelBtn" onclick="toggleExplain()">‚ÑπÔ∏è Explanation</button>
<div id="explain" style="display:none;font-size:14px;margin-top:10px">
This is an educational demo showing how browsers protect users from notification spam.
</div>
</div>

<div class="section">
<button class="panelBtn" onclick="openHelp()">‚ùì Why didn‚Äôt I get a notification?</button>
</div>

</div>

<!-- HELP MODAL -->
<div class="modal" id="help">
<div class="modalBox">
<h3>Why didn‚Äôt I get a notification?</h3>
<p>
Windows blocks notification spam at OS level.<br>
This demo uses a visual preview instead.
</p>
<button class="panelBtn" onclick="closeHelp()">Close</button>
</div>
</div>

<div id="toastArea"></div>

<script>
const isWindows=/Win/i.test(navigator.userAgent);
if(isWindows)windowsNotice.style.display="block";

let speed=200,count=30;
const timeouts=[];
const bar=document.getElementById("bar");
const history=document.getElementById("history");

const titleInput=document.getElementById("titleInput");
const textInput=document.getElementById("textInput");
const iconInput=document.getElementById("iconInput");

titleInput.value=localStorage.t||"Demo";
textInput.value=localStorage.m||"Hello!";
iconInput.value=localStorage.i||"";

function save(){
  localStorage.t=titleInput.value;
  localStorage.m=textInput.value;
  localStorage.i=iconInput.value;
}

function togglePanel(){panel.classList.toggle("open")}
function toggleDark(){document.body.classList.toggle("dark")}
function toggleExplain(){explain.style.display=explain.style.display==="none"?"block":"none"}
function openHelp(){help.style.display="flex"}
function closeHelp(){help.style.display="none"}

speedSlider.oninput=()=>{speed=+speedSlider.value;speedLabel.textContent=speed}
countSlider.oninput=()=>{count=+countSlider.value;countLabel.textContent=count}

function addHistory(t){
  if(history.textContent.includes("No"))history.innerHTML="";
  history.innerHTML+="‚Ä¢ "+t+"<br>";
}

function toast(t,b,i){
  const d=document.createElement("div");
  d.className="toast";
  d.innerHTML=`<strong>${t}</strong><div>${b}</div>`;
  toastArea.appendChild(d);
  setTimeout(()=>d.remove(),3500);
}

function send(t,b,i){
  if(isWindows)toast(t,b,i);
  else try{new Notification(t,{body:b,icon:i})}catch{}
}

function requestPermission(){
  Notification.requestPermission();
}

function sendOne(){
  save();
  send(titleInput.value,textInput.value,iconInput.value);
  addHistory(textInput.value);
}

function startDemo(){
  stopAll();bar.style.width="0%";
  for(let i=1;i<=count;i++){
    const to=setTimeout(()=>{
      send("SECURITY ALERT",textInput.value,iconInput.value);
      bar.style.width=(i/count*100)+"%";
      addHistory("SECURITY ALERT");
    },i*speed);
    timeouts.push(to);
  }
}

function stopAll(){while(timeouts.length)clearTimeout(timeouts.pop())}
function setPreset(t){textInput.value=t;save()}
</script>

</body>
</html>
