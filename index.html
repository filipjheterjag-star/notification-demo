<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notification Demo</title>

<style>
:root{
  --bg:#f4f6f8;--card:#fff;--text:#000;--panel:#eef2ff;
}
body.dark{
  --bg:#0f172a;--card:#1e293b;--text:#e5e7eb;--panel:#020617;
}
body{
  margin:0;padding:20px;font-family:Arial,sans-serif;
  background:var(--bg);color:var(--text);
}
.main{
  max-width:520px;margin:auto;background:var(--card);
  padding:20px;border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}
button,input{
  width:100%;padding:10px;margin-top:10px;
  border-radius:6px;font-size:15px;
}
button{border:none;cursor:pointer}
.primary{background:#4f46e5;color:#fff}
.normal{background:#10b981;color:#fff}
.danger{background:#ef4444;color:#fff}
.stop{background:#6b7280;color:#fff}
.panelBtn{background:#0ea5e9;color:#fff}

.notice{
  margin-bottom:10px;padding:8px;border-radius:6px;
  background:#fde68a;color:#92400e;font-size:13px;
  text-align:center;display:none;
}

.progress{width:100%;height:14px;background:#374151;border-radius:7px;overflow:hidden;margin-top:10px}
.bar{height:100%;width:0%;background:#ef4444}

.footer{margin-top:20px;text-align:center;font-size:13px;opacity:.7}

/* SIDE PANEL */
.side{
  position:fixed;top:0;right:-360px;width:360px;height:100%;
  background:var(--card);padding:20px;
  box-shadow:-10px 0 25px rgba(0,0,0,.25);
  transition:right .3s ease;z-index:1000;overflow-y:auto;
}
.side.open{right:0}

.section{margin-top:20px}
.section h3{margin-bottom:8px}

.history{
  padding:10px;background:var(--panel);
  border-radius:6px;font-size:13px;
  max-height:160px;overflow-y:auto;
}

.statbar{
  height:12px;background:#374151;border-radius:6px;overflow:hidden;margin-top:6px
}
.statfill{
  height:100%;width:0%;background:#22c55e
}

/* WINDOWS PREVIEW */
#toastArea{
  position:fixed;right:16px;bottom:16px;z-index:3000;
  display:flex;flex-direction:column;gap:10px;pointer-events:none;
}
.toast{
  width:320px;background:#111827;color:#e5e7eb;border-radius:10px;
  padding:12px;box-shadow:0 10px 25px rgba(0,0,0,.35);
}
</style>
</head>

<body>

<div class="main">
<h2>üîî Notification Experiment</h2>

<div class="notice" id="windowsNotice">
Only supported for Chromebook at this point.<br>
Windows uses a visual preview.
</div>

<button class="primary" onclick="requestPermission()">Allow Notifications</button>
<button class="normal" onclick="sendOne()">Send Notification</button>
<button class="danger" onclick="startDemo()">‚ö†Ô∏è Fake ‚ÄúHacked‚Äù Demo</button>
<button class="stop" onclick="stopAll()">üõë Stop</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<button class="panelBtn" onclick="togglePanel()">‚öôÔ∏è Open Sidebar</button>

<div class="footer">¬© Copyright FilipoPencil 2026</div>
</div>

<!-- SIDEBAR -->
<div class="side" id="panel">

<button class="panelBtn" onclick="togglePanel()">‚ùå Close</button>
<button class="panelBtn" onclick="toggleDark()">üåô Toggle Dark Mode</button>

<!-- ACCOUNT -->
<div class="section">
<h3>üë§ Account (Demo)</h3>

<div id="authBox">
<input id="userInput" placeholder="Username">
<input id="passInput" type="password" placeholder="Password">
<button class="panelBtn" onclick="login()">Login / Create</button>
</div>

<div id="accountBox" style="display:none">
<strong id="userLabel"></strong>
<button class="panelBtn" onclick="logout()">Log out</button>

<div style="margin-top:10px;font-size:14px">
Notifications sent: <strong id="notifCount">0</strong>
<div class="statbar">
  <div class="statfill" id="statFill"></div>
</div>
</div>
</div>
</div>

<!-- CONTROLS -->
<div class="section">
<h3>‚úèÔ∏è Notification Content</h3>
<input id="titleInput" placeholder="Title">
<input id="textInput" placeholder="Message">
</div>

<div class="section">
<h3>‚è±Ô∏è Demo Controls</h3>
Speed: <span id="speedLabel">200</span> ms
<input type="range" min="100" max="2000" step="100" value="200" id="speedSlider">
Count: <span id="countLabel">30</span>
<input type="range" min="5" max="100" value="30" id="countSlider">
</div>

<div class="section">
<h3>üïò Fake Notification History</h3>
<div class="history" id="history">No notifications yet.</div>
</div>

</div>

<div id="toastArea"></div>

<script>
/* OS */
const isWindows=/Win/i.test(navigator.userAgent);
if(isWindows)windowsNotice.style.display="block";

/* STATE */
let speed=200,count=30;
const timeouts=[];
let currentUser=null;

/* ELEMENTS */
const history=document.getElementById("history");
const bar=document.getElementById("bar");

/* PANEL */
function togglePanel(){panel.classList.toggle("open")}
function toggleDark(){document.body.classList.toggle("dark")}

/* AUTH (DEMO) */
function login(){
  const u=userInput.value.trim();
  const p=passInput.value;
  if(!u||!p)return alert("Enter username and password");

  const users=JSON.parse(localStorage.users||"{}");
  if(!users[u]) users[u]={password:p, sent:0};
  if(users[u].password!==p) return alert("Wrong password");

  currentUser=u;
  localStorage.users=JSON.stringify(users);
  showAccount();
}

function logout(){
  currentUser=null;
  authBox.style.display="block";
  accountBox.style.display="none";
}

function showAccount(){
  authBox.style.display="none";
  accountBox.style.display="block";
  userLabel.textContent="Logged in as: "+currentUser;
  updateStats();
}

function updateStats(){
  const users=JSON.parse(localStorage.users||"{}");
  const sent=users[currentUser]?.sent||0;
  notifCount.textContent=sent;
  statFill.style.width=Math.min(sent,100)+"%";
}

/* CONTROLS */
speedSlider.oninput=()=>{speed=+speedSlider.value;speedLabel.textContent=speed}
countSlider.oninput=()=>{count=+countSlider.value;countLabel.textContent=count}

/* HISTORY */
function addHistory(t){
  if(history.textContent.includes("No"))history.innerHTML="";
  history.innerHTML+="‚Ä¢ "+t+"<br>";
}

/* NOTIFICATION */
function toast(t,b){
  const d=document.createElement("div");
  d.className="toast";
  d.innerHTML=`<strong>${t}</strong><div>${b}</div>`;
  toastArea.appendChild(d);
  setTimeout(()=>d.remove(),3500);
}

function send(t,b){
  if(isWindows) toast(t,b);
  else try{new Notification(t,{body:b})}catch{}
}

/* ACTIONS */
function requestPermission(){Notification.requestPermission()}

function countSend(){
  if(!currentUser) return;
  const users=JSON.parse(localStorage.users||"{}");
  users[currentUser].sent++;
  localStorage.users=JSON.stringify(users);
  updateStats();
}

function sendOne(){
  send(titleInput.value||"Demo",textInput.value||"Hello");
  addHistory(textInput.value||"Hello");
  countSend();
}

function startDemo(){
  stopAll();bar.style.width="0%";
  for(let i=1;i<=count;i++){
    const t=setTimeout(()=>{
      send("SECURITY ALERT",textInput.value||"Alert");
      bar.style.width=(i/count*100)+"%";
      addHistory("SECURITY ALERT");
      countSend();
    },i*speed);
    timeouts.push(t);
  }
}

function stopAll(){while(timeouts.length)clearTimeout(timeouts.pop())}
</script>

</body>
</html>
