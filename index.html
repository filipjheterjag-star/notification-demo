<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notification Demo</title>

<style>
body{margin:0;padding:20px;font-family:Arial;background:#f4f6f8}
.main{max-width:500px;margin:auto;background:#fff;padding:20px;border-radius:12px}
button,input{width:100%;padding:10px;margin-top:10px;font-size:15px}
.primary{background:#4f46e5;color:#fff;border:none}
.normal{background:#10b981;color:#fff;border:none}
.danger{background:#ef4444;color:#fff;border:none}
.stop{background:#6b7280;color:#fff;border:none}

.sidebar{
  position:fixed;top:0;right:0;width:300px;height:100%;
  background:#fff;padding:20px;
  transform:translateX(100%);
  transition:.3s;box-shadow:-5px 0 20px rgba(0,0,0,.2)
}
.sidebar.open{transform:translateX(0)}

.progress{height:10px;background:#ddd;margin-top:10px}
.bar{height:100%;width:0;background:#ef4444}
</style>
</head>

<body>

<div class="main">
<h2>üîî Notification Experiment</h2>

<button class="primary" onclick="requestPermission()">Allow Notifications</button>
<button class="normal" onclick="sendOne()">Send Notification</button>
<button class="danger" onclick="startDemo()">Fake ‚ÄúHacked‚Äù Demo</button>
<button class="stop" onclick="stopAll()">Stop</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<button onclick="toggleControls()">‚öôÔ∏è Controls</button>
</div>

<div class="sidebar" id="controls">
<h3>Controls</h3>

Title
<input id="titleInput" value="Demo">

Message
<input id="msgInput" value="Hello">

Speed: <span id="speedVal">200</span> ms
<input type="range" min="100" max="2000" step="100" value="200" id="speed">

Count: <span id="countVal">30</span>
<input type="range" min="5" max="100" value="30" id="count">
</div>

<script>
let speed=200, count=30;
let timers=[];

const speedSlider=document.getElementById("speed");
const countSlider=document.getElementById("count");
const speedVal=document.getElementById("speedVal");
const countVal=document.getElementById("countVal");

speedSlider.oninput=()=>{
  speed=speedSlider.value;
  speedVal.textContent=speed;
};
countSlider.oninput=()=>{
  count=countSlider.value;
  countVal.textContent=count;
};

function toggleControls(){
  document.getElementById("controls").classList.toggle("open");
}

function requestPermission(){
  Notification.requestPermission();
}

function sendOne(){
  if(Notification.permission==="granted"){
    new Notification(titleInput.value,{body:msgInput.value});
  }
}

function startDemo(){
  stopAll();
  bar.style.width="0%";
  for(let i=1;i<=count;i++){
    const t=setTimeout(()=>{
      if(Notification.permission==="granted"){
        new Notification("SECURITY ALERT",{body:msgInput.value});
      }
      bar.style.width=(i/count*100)+"%";
    },i*speed);
    timers.push(t);
  }
}

function stopAll(){
  timers.forEach(clearTimeout);
  timers=[];
}
</script>

</body>
</html>
