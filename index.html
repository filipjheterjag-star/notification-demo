<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notification Demo</title>

<style>
:root{--bg:#f4f6f8;--card:#fff;--text:#000;--panel:#eef2ff}
body.dark{--bg:#0f172a;--card:#1e293b;--text:#e5e7eb;--panel:#020617}
body{margin:0;padding:20px;font-family:Arial;background:var(--bg);color:var(--text)}
.main{max-width:520px;margin:auto;background:var(--card);padding:20px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.15)}
button,input{width:100%;padding:10px;margin-top:10px;border-radius:6px;font-size:15px}
button{border:none;cursor:pointer}
.primary{background:#4f46e5;color:#fff}
.normal{background:#10b981;color:#fff}
.danger{background:#ef4444;color:#fff}
.stop{background:#6b7280;color:#fff}
.panelBtn{background:#0ea5e9;color:#fff}
.notice{padding:8px;background:#fde68a;color:#92400e;border-radius:6px;font-size:13px;display:none}
.progress{width:100%;height:14px;background:#374151;border-radius:7px;overflow:hidden;margin-top:10px}
.bar{height:100%;width:0%;background:#ef4444}
.footer{text-align:center;font-size:13px;opacity:.7;margin-top:20px}

.sidebar{position:fixed;top:0;width:320px;height:100%;background:var(--card);padding:20px;box-shadow:0 10px 25px rgba(0,0,0,.25);transition:.3s;overflow-y:auto;z-index:1000}
.left{left:0;transform:translateX(-100%)}
.right{right:0;transform:translateX(100%)}
.sidebar.open{transform:translateX(0)}

.section{margin-top:20px}
.history{background:var(--panel);padding:10px;border-radius:6px;font-size:13px;max-height:160px;overflow-y:auto}

#toastArea{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:10px;z-index:3000}
.toast{width:320px;background:#111827;color:#e5e7eb;border-radius:10px;padding:12px}
</style>
</head>

<body>

<div class="main">
<h2>üîî Notification Experiment</h2>

<div class="notice" id="windowsNotice">
Only supported for Chromebook at this point.<br>
Windows uses a visual preview.
</div>

<button class="primary" onclick="requestPermission()">Allow Notifications</button>
<button class="normal" onclick="sendOne()">Send Notification</button>
<button class="danger" onclick="startDemo()">‚ö†Ô∏è Fake ‚ÄúHacked‚Äù Demo</button>
<button class="stop" onclick="stopAll()">üõë Stop</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<button class="panelBtn" onclick="toggleRight()">‚öôÔ∏è Controls</button>

<div class="footer">¬© Copyright FilipoPencil 2026</div>
</div>

<div class="sidebar right" id="rightBar">
<button class="panelBtn" onclick="toggleRight()">‚ùå Close</button>

<div class="section">
<input id="titleInput" placeholder="Title">
<input id="msgInput" placeholder="Message">
</div>

<div class="section">
Speed <strong><span id="speedVal">200</span> ms</strong>
<input type="range" min="100" max="2000" step="100" value="200" id="speed">

Count <strong><span id="countVal">30</span></strong>
<input type="range" min="5" max="100" value="30" id="count">
</div>

<div class="section">
<div class="history" id="history">No notifications yet.</div>
</div>
</div>

<div id="toastArea"></div>

<script>
document.addEventListener("DOMContentLoaded", () => {

const isWindows=/Win/i.test(navigator.userAgent);
if(isWindows) windowsNotice.style.display="block";

let speed=200, count=30;
const timeouts=[];

function toggleRight(){ rightBar.classList.toggle("open"); }

speed.oninput=()=>{ speed=+speed.value; speedVal.textContent=speed; };
count.oninput=()=>{ count=+count.value; countVal.textContent=count; };

function log(msg){
  if(history.textContent.includes("No")) history.innerHTML="";
  history.innerHTML+="‚Ä¢ "+msg+"<br>";
}

function toast(t,b){
  const d=document.createElement("div");
  d.className="toast";
  d.innerHTML=`<strong>${t}</strong><div>${b}</div>`;
  toastArea.appendChild(d);
  setTimeout(()=>d.remove(),3000);
}

function send(t,b){
  if(isWindows) toast(t,b);
  else if(Notification.permission==="granted") new Notification(t,{body:b});
}

window.requestPermission=()=>Notification.requestPermission();

window.sendOne=()=>{
  send(titleInput.value||"Demo",msgInput.value||"Hello");
  log(msgInput.value||"Hello");
};

window.startDemo=()=>{
  stopAll(); bar.style.width="0%";
  for(let i=1;i<=count;i++){
    const to=setTimeout(()=>{
      send("SECURITY ALERT",msgInput.value||"Alert");
      bar.style.width=(i/count*100)+"%";
      log("SECURITY ALERT");
    },i*speed);
    timeouts.push(to);
  }
};

window.stopAll=()=>{ while(timeouts.length) clearTimeout(timeouts.pop()); };

});
</script>

</body>
</html>
