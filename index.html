<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notification Demo</title>

<style>
:root{
  --bg:#f4f6f8;
  --card:#ffffff;
  --text:#0f172a;
  --accent:#4f46e5;
}
body.dark{
  --bg:#0b1220;
  --card:#111827;
  --text:#e5e7eb;
}
body{
  margin:0;
  padding:20px;
  font-family:Inter,Arial;
  background:var(--bg);
  color:var(--text);
}

.main{
  max-width:520px;
  margin:auto;
  background:var(--card);
  padding:24px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
}

h2{margin-top:0}

button{
  width:100%;
  padding:13px;
  margin-top:12px;
  border:none;
  border-radius:10px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
}
.primary{background:var(--accent);color:#fff}
.normal{background:#10b981;color:#fff}
.danger{background:#ef4444;color:#fff}
.panelBtn{background:#0ea5e9;color:#fff}

.progress{
  width:100%;
  height:14px;
  background:#c7c9d1;
  border-radius:999px;
  overflow:hidden;
  margin-top:16px;
}
.bar{
  height:100%;
  width:0%;
  background:#ef4444;
  transition:width .25s linear;
}

/* PANEL */
.sidebar{
  position:fixed;
  top:0;
  right:0;
  width:340px;
  height:100%;
  background:var(--card);
  padding:22px;
  box-shadow:-15px 0 40px rgba(0,0,0,.3);
  transform:translateX(100%);
  transition:.3s;
  z-index:1000;
}
.sidebar.open{transform:translateX(0)}

.history{
  background:#e5e7eb;
  padding:12px;
  border-radius:10px;
  font-size:13px;
  max-height:220px;
  overflow:auto;
}
body.dark .history{background:#020617}

/* TOASTS */
#toastArea{
  position:fixed;
  right:18px;
  bottom:18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  z-index:2000;
}
.toast{
  background:#020617;
  color:#fff;
  padding:14px;
  border-radius:12px;
  width:320px;
  box-shadow:0 10px 30px rgba(0,0,0,.5);
  animation:slide .25s ease;
}
@keyframes slide{
  from{transform:translateY(10px);opacity:0}
  to{transform:none;opacity:1}
}
</style>
</head>

<body>

<div class="main">
  <h2>üîî Notification Experiment</h2>

  <button class="primary" onclick="requestPermission()">Allow Notifications</button>
  <button class="normal" onclick="sendOne()">Send Notification</button>
  <button class="danger" onclick="startDemo()">‚ö†Ô∏è Fake ‚ÄúHacked‚Äù Demo</button>

  <div class="progress"><div class="bar" id="bar"></div></div>

  <button class="panelBtn" onclick="togglePanel()">‚öôÔ∏è Open Panel</button>
</div>

<div class="sidebar" id="panel">
  <button class="panelBtn" onclick="togglePanel()">‚ùå Close</button>
  <button class="panelBtn" onclick="toggleDark()">üåô Dark Mode</button>

  <h3>üìú Notification History</h3>
  <div class="history" id="history">No notifications yet.</div>

  <h3>‚ùì Info</h3>
  <p><strong>Why didn‚Äôt I get a notification?</strong><br>
  Browser permissions may be blocked.</p>

  <p><strong>What is this demo?</strong><br>
  A realistic notification spam / security demo.</p>
</div>

<div id="toastArea"></div>

<script>
const panel=document.getElementById("panel");
const historyBox=document.getElementById("history");
const bar=document.getElementById("bar");
const toastArea=document.getElementById("toastArea");
const isWindows=/Win/i.test(navigator.userAgent);
const timeouts=[];

function togglePanel(){panel.classList.toggle("open")}
function toggleDark(){document.body.classList.toggle("dark")}

function log(msg){
  if(historyBox.textContent.includes("No notifications")) historyBox.innerHTML="";
  historyBox.innerHTML+="‚Ä¢ "+msg+"<br>";
}

function toast(title,body){
  const t=document.createElement("div");
  t.className="toast";
  t.innerHTML=`<strong>${title}</strong><div>${body}</div>`;
  toastArea.appendChild(t);
  setTimeout(()=>t.remove(),3000);
}

function send(title,body){
  if(isWindows) toast(title,body);
  else if(Notification.permission==="granted") new Notification(title,{body});
}

function requestPermission(){
  Notification.requestPermission();
}

function sendOne(){
  send("Demo Notification","This is a test.");
  log("Demo Notification");
}

function startDemo(){
  stopAll();
  bar.style.width="0%";

  const messages=[
    "Unknown login detected",
    "IP: 185.44.23.91 (DE)",
    "Password hash extracted",
    "Admin privileges escalated",
    "Session hijacked",
    "Firewall disabled",
    "Remote access enabled",
    "Data exfiltration started",
    "User tokens leaked",
    "System override",
    "Kernel access granted",
    "Security services stopped",
    "External command received",
    "Ransomware payload loaded",
    "Encrypting files...",
    "Backup deleted",
    "Tracking disabled",
    "Persistence installed",
    "User locked out",
    "Finalizing attack",
    "System compromised",
    "Contacting C2 server",
    "Uploading logs",
    "Injecting process",
    "Spoofing identity",
    "Account takeover",
    "Critical failure",
    "Access denied",
    "Device locked",
    "Attack complete"
  ];

  messages.forEach((msg,i)=>{
    const id=setTimeout(()=>{
      send("SECURITY ALERT",msg);
      log(msg);
      bar.style.width=((i+1)/messages.length*100)+"%";
    }, i*180); // FAST üî•
    timeouts.push(id);
  });
}

function stopAll(){
  while(timeouts.length) clearTimeout(timeouts.pop());
}
</script>

</body>
</html>
