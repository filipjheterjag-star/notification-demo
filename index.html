<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Notification Experiment</title>

<style>
body{
  margin:0;
  padding:20px;
  font-family:Arial, sans-serif;
  background:#f4f6f8;
  color:#111;
}
.main{
  max-width:520px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}
button,input{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
  font-size:15px;
  border:none;
}
.blue{background:#2563eb;color:#fff}
.green{background:#10b981;color:#fff}
.red{background:#ef4444;color:#fff}
.gray{background:#6b7280;color:#fff}
.notice{
  background:#fde68a;
  color:#92400e;
  padding:8px;
  border-radius:6px;
  font-size:13px;
  margin-bottom:10px;
}
.progress{
  width:100%;
  height:12px;
  background:#e5e7eb;
  border-radius:6px;
  overflow:hidden;
  margin-top:10px;
}
.bar{
  height:100%;
  width:0%;
  background:#ef4444;
}
.status{
  font-size:14px;
  margin-top:10px;
}
.footer{
  text-align:center;
  font-size:13px;
  opacity:.7;
  margin-top:20px;
}
#toastArea{
  position:fixed;
  right:16px;
  bottom:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.toast{
  width:320px;
  background:#111827;
  color:#e5e7eb;
  padding:12px;
  border-radius:10px;
}
.popup{
  display:none;
  background:#eef2ff;
  padding:10px;
  border-radius:6px;
  margin-top:6px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="main">
<h2>üîî Notification Experiment</h2>

<div class="notice" id="windowsNotice" style="display:none">
ü™ü Windows detected. Using visual notification preview (simulation).
</div>

<button class="blue" onclick="toggleExplain()">‚ÑπÔ∏è What is this demo?</button>
<div class="popup" id="explainBox">
This is a **browser notification demo** showing how alerts behave depending on OS and permissions.
</div>

<button class="blue" onclick="toggleHelp()">‚ùì Why didn‚Äôt I get a notification?</button>
<div class="popup" id="helpBox">
‚Ä¢ Notifications blocked by browser  
‚Ä¢ Page not allowed  
‚Ä¢ Windows uses a visual preview instead
</div>

<button class="blue" onclick="openPanel()">‚öôÔ∏è Open Panel</button>

<button class="blue" onclick="requestPermission()">Allow Notifications</button>

<label style="margin-top:10px;display:block">Normal notification text:</label>
<input id="msgInput" placeholder="test">

<button class="green" onclick="sendOne()">Normal Notification</button>

<div style="margin-top:10px">Notifications to send: <strong id="countLabel">30</strong></div>

<button class="red" onclick="startDemo()">‚ö†Ô∏è Fake ‚ÄúHacked‚Äù Demo</button>
<button class="gray" onclick="stopAll()">üõë Stop</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<div class="status">
Status: <strong id="status">Ready</strong><br>
Attempts: <span id="attempts">0</span> |
Sent: <span id="sent">0</span> |
Blocked: <span id="blocked">0</span><br>
Browser protection: <span style="color:green">Allowed</span>
</div>

<div class="footer">¬© Copyright FilipoPencil 2026</div>
</div>

<div id="toastArea"></div>

<script>
const isWindows=/Win/i.test(navigator.userAgent);
if(isWindows) windowsNotice.style.display="block";

let count=30;
let attempts=0,sent=0,blocked=0;
let running=false;
let timeouts=[];

function toggleExplain(){
  explainBox.style.display=
    explainBox.style.display==="block"?"none":"block";
}
function toggleHelp(){
  helpBox.style.display=
    helpBox.style.display==="block"?"none":"block";
}
function openPanel(){
  alert("Panel opened (demo)");
}

function requestPermission(){
  Notification.requestPermission();
}

function toast(t,b){
  const d=document.createElement("div");
  d.className="toast";
  d.innerHTML=`<strong>${t}</strong><div>${b}</div>`;
  toastArea.appendChild(d);
  setTimeout(()=>d.remove(),3000);
}

function send(t,b){
  attempts++;
  if(isWindows){
    toast(t,b);
    sent++;
  }else if(Notification.permission==="granted"){
    new Notification(t,{body:b});
    sent++;
  }else{
    blocked++;
  }
  updateStats();
}

function sendOne(){
  send("Notification",msgInput.value||"test");
}

function startDemo(){
  stopAll();
  running=true;
  status.textContent="Running";
  bar.style.width="0%";

  for(let i=1;i<=count;i++){
    const to=setTimeout(()=>{
      if(!running) return;
      send("SECURITY ALERT",msgInput.value||"Alert");
      bar.style.width=(i/count*100)+"%";
      if(i===count) status.textContent="Completed";
    },i*150);
    timeouts.push(to);
  }
}

function stopAll(){
  running=false;
  status.textContent="Stopped";
  while(timeouts.length) clearTimeout(timeouts.pop());
}

function updateStats(){
  attempts.textContent=attempts;
  sent.textContent=sent;
  blocked.textContent=blocked;
}
</script>

</body>
</html>
